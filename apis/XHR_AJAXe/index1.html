<!DOCTYPE html>
<html>
    <head>
        <meta>

    </head>
    <body>
        <div>
            <button id="loadTextFile">Click Here to Load File</button>
            <div id="loadTextHere">
                <span id="showData">Show Articles</span>
            </div>
        </div>
        <script type='text/javascript' src='keys1.js'></script>
    <script>
        document.getElementById("loadTextFile").addEventListener('click', loadText);

        function loadText() {
            var xhrCall = new XMLHttpRequest();
            const apiKey = config.apiKey;
            var url = 'https://newsapi.org/v2/top-headlines?' +
          'country=us&' + apiKey; 
          console.log(url);
            xhrCall.open('GET', url, true);
            
            //.onload checks the readystate automatically but not the status
            xhrCall.onload = function() {
                    var data = Object.entries(JSON.parse(this.responseText).articles);
/*               var stuff = Object.entries(data);
                    console.log(stuff);      */
///////////////// -----use data to crate array
//Replace with forEach or .map 
for (var i = 0; i < data.length; i++) {
    console.log(data[i]);
    var responseNum = data[i][0];
    //test Healdine
    let title = data[i][1].title;
    let author = data[i][1].author;
    let img = data[i][1].urlToImage;
    let des = data[i][1].description;
    let url = data[i][1].url;
    let pubAt = data[i][1].publishedAt;
    let src = data[i][1].source.name;
   // console.log(typeof(data[i][1].source.name));
    // console.log(typeof(src));
 //create div with id
 let div = document.createElement("div");
 let divId = div.setAttribute("id", responseNum);
 let divStyle = div.setAttribute("style", "background-image: linear-gradient(to bottom right, gray, white); padding: 20px; margin: 10px");
 //let divPad = div.setAttribute("style", "padding: 20px");
//Clear Text

let br = document.createElement("BR");
//Create parent
var parent = document.getElementById("loadTextHere");
//Clear the nonsense
let nonsense = document.getElementById("showData");
let clear = nonsense.innerHTML = "";
//IMAGE w LINK

//anchor
var anchor = document.createElement("A");
//image
let showImage = document.createElement("img");
let imgUrl = showImage.setAttribute("src", img); 
let imgWidth = showImage.setAttribute("style", "width: 20vmin");
let imageHeight = showImage.setAttribute("style", "height: 20vmin");
//let imageRound = showImage.setAttribute("style", "border-radius:);
//let imgSRC = showImage.setAttribute("src", url);

//console.log(url);
parent.appendChild(div);
//ATTACH TO DIV
let d = document.getElementById(responseNum);
d.appendChild(showImage);
d.appendChild(br);
//
var anchor = document.createElement("A");
let anchorText = document.createTextNode("Read More From " + src);
anchor.setAttribute('href', url);
anchor.appendChild(anchorText)

//let href = anchor.setAttribute("href", url);
//let a = anchor.appendChild(anchorText);
//console.log(url);



//Title
var h1 = document.createElement("h3");
h1.innerHTML = title;
//Author
var h5 = document.createElement("h5");
h5.innerHTML = author;
//console.log("AUTHORS " + author);
//SRC
let h6 = document.createElement("h6");
h6.innerHTML = src;
//Description
var p = document.createElement("p");
p.innerHTML = des;

  //var parent = document.getElementsByClassName("showData");
//parent.appendChild(br);
parent.appendChild(anchor);
parent.appendChild(h1);
parent.appendChild(h5);
parent.appendChild(h6);
parent.appendChild(p);
 /*
 html = `<div class="article"> ${title}</div>`;
 console.log(html);
 var articleParent = document.getElementById("loadTextFile");
 articleParent.appendChild(html);
 */


  //document.getElementsByClassName('showData');
  
} 


/*

var publisher = result[0][1].author;
console.log(publisher);

var postUrl = result[0][1].url;
console.log(postUrl);

var title = 
console.log(title);
*/
                    
            }

            xhrCall.send();
            
        }
    </script>
    </body>
</html>

<!-- Remove console.log()s 
    
    Delete Comments, API Key works

render data inide elements


//data is rendering
//comment out crap
//delete comments

//write html in variable to write in for loop

//and why is data object so WEIRD?? CHECK data type

//include dynamic html to append to parent element

-->
